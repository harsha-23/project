<div data-ng-include="'views/admin/common-css.html'"
                   ></div>

<div class="page-wrapper">
    <div class="page-wrapper-row">
        <div class="page-wrapper-top">
            <!-- BEGIN HEADER -->
            <div data-ng-include="'views/layouts/tpl/header.html'" data-ng-controller="menuCtrl as mnc"
                class="page-header"></div>
            <!-- END HEADER -->
        </div>
    </div>


    <div class="page-wrapper-row full-height">
        <div class="page-wrapper-middle">
            <!-- BEGIN CONTAINER -->
            <div class="page-container">
                <!-- BEGIN PAGE HEAD -->

                <!-- END PAGE HEAD -->
                <!-- BEGIN PAGE CONTENT -->
                <div class="page-content">
                    <div class="container">

                        <!-- test -->

<div class="row">
    <div class="col-md-12 col-sm-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-magnifier font-green"></i>
                    <span class="caption-subject font-green sbold uppercase">insurance status</span>
                </div>
            </div>
            <div class="portlet-body">
                <form class="form-horizontal form-bordered" id="insuranceForm">



                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 text-left">From Date<span class="required"
                                        aria-required="true"> * </span></label>
                                <div class="col-sm-12">
                                    <input type="text" name="date" id="date" readonly="true" ng-model="date"
                                        class="form-control">
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 text-left">To Date<span class="required"
                                        aria-required="true"> * </span></label>
                                <div class="col-sm-12">
                                    <input type="text" name="tdate" id="tdate" readonly="true" ng-model="tdate"
                                        class="form-control"><span class="err">{{errMessage}}</span>
                                </div>
                            </div>
                        </div>



                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 ">Select Status</label>
                                <div class="col-sm-12">
                                    <select class="form-control" name="status" id="status" ng-model="status">
                                        <option value="">Please Select</option>
                                        <option value="{{status}}" ng-repeat="status in statusList">{{status}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 text-left">Lead Id</label>
                                <div class="col-sm-12">

                                    <input type="text" class="form-control" id="lead" name="lead" ng-model="lead">
                                </div>
                            </div>
                        </div>

                    </div>




                    <div class="row">


                       


                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 text-left">Name</label>
                                <div class="col-sm-12">

                                    <input type="text" class="form-control" id="name" name="name" ng-model="name">
                                </div>
                            </div>
                        </div>


                        <div class="col-sm-3" ng-show="vendorShow=='medfin'">
                            <div class="form-group">
                                <label class="control-label col-sm-12 ">Select Vendor</label>
                                <div class="col-sm-12">
                                    <select class="form-control" name="vendor" id="vendor" ng-model="vendor">
                                        <option value="">Please Select</option>
                                        <option value="{{vendor}}" ng-repeat="vendor in vendorList">{{vendor}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label col-sm-12 ">Select KYP Status</label>
                                <div class="col-sm-12">
                                    <select class="form-control" name="kyp" id="kyp" ng-model="kyp">
                                       
                                        <option value="{{kyp.value}}" ng-repeat="kyp in kypList">{{kyp.option}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>



                    <div class="row">
                        <div class="col-md-6" style="margin-top: 10px;">
                            <div class="col-md-4">
                                <input type="button" date-exportexcel="false" data-page="1"
                                    class="btn blue btn-block margin-top-20 green-haze" value="Submit"
                                    ng-click="submit(0);">
                            </div>
                            <div class="col-md-4">
                                <input type="button" ng-click="resetFilter()"
                                    class="btn blue btn-block margin-top-20 red-haze" value="Clear">
                            </div>
                            <div class="col-md-4" ng-if="can('insurance.estimate.filter.export')">
                                <input type="button" date-exportexcel="false" data-page="1"
                                    class="btn blue btn-block margin-top-20 green-haze" value="Export To Excel"
                                    ng-click="export(0);">
                            </div>
                        </div>
                    </div>

                </form>

            </div>
        </div>
    </div>
</div>



<div class="row" ng-show="total > 0">
    <div class="col-md-12 col-sm-12">
        <div class="portlet light ">
            <div class="portlet-title">
                <div class="caption caption-md">
                    <i class="icon-list font-green"></i>
                    <span class="caption-subject font-green sbold uppercase"> LIST (LEAD COUNT -
                        {{total}})</span>
                </div>
            </div>
            <div class="portlet-body">
                <table class="table table-striped table-bordered table-advance table-hover">
                    <thead>
                        <tr>


                            <th>Patient Name / Mobile / Vendor</th>
                            <th>Insurance / TPA / Insurance Type / Claim Type</th>

                            <th>Posted By / Posted Date</th>
                            <th>Surgery Name / Reference Number</th>

                            <th>status</th>



                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="insurance in userList">

                            <td>{{insurance.patientName}}<br />
                                <br />

                                <span ng-if="can('mobile.number.display.permission')"> {{insurance.patientMobile}}<a href="#"
                                    ng-click="actions.makeConferenceCallByMobile({mobile:insurance.patientMobile,leadId:insurance.leadId})"><i
                                        class="fa fa-phone"></i></a>
                            </span>
                            <a class="btn btn-icon-only btn-circle popovers" data-toggle="popover" ng-click="actions.getMobileNumber({                                               
                                lead: insurance.leadId,                                               
                            })"
                            data-container="body" data-trigger="hover" data-placement="top"
                            data-content="View mobile"
                            data-original-title="Verify OTP" href="#"><i
                                class="icon-eye font-green-sharp"></i></a>
                                <br /> <br/>
								<b>{{insurance.vendor}}</b>
                                <br /><br />
                                <a href="/insurance-estimate/{{insurance.token}}" target="_blank">Details</a>

                            </td>
                            <td>{{insurance.insuranceName}}<br /> <br /> {{insurance.tpa}}<br /> <br />
                                {{insurance.insuranceType}} <br /> <br /><strong>{{insurance.claimType}}</strong></td>
                            <td>{{insurance.postedBy}} <br /> <br /> {{insurance.postedDate}}</td>
                            <td>{{insurance.surgeryName}} <br /> <br /> {{insurance.referenceNumber}}</td>

                            <td>
                                <table class="table table-striped table-bordered table-advance table-hover">
                                    <tr>
                                        <th>Doctor</th>
                                        <th>Hospital</th>
                                        <th>Status</th>
                                    </tr>
                                    <tr ng-repeat="status in insurance.info">
                                        <td>{{status.doctor}} </td>
                                        <td> {{status.hospital}}</td>
                                        <td>{{status.eligibility}}</td>
                                    </tr>
                                </table>
                            </td>

                        </tr>
                    </tbody>
                </table>


                <div class="row " ng-show="userList.length > 0">
                    <div class="col-sm-12 text-right">
                        <!-- pagination -->
                        <div paging page="currentPage" page-size="pageSize" total="total" show-prev-next="true"
                            text-next="next" text-prev="prev" paging-action="pagination('Paging Clicked', page)">
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
 <!-- test -->
</div>
</div>
<!-- END PAGE CONTENT -->
<!-- BEGIN QUICK SIDEBAR -->
<a href="javascript:;" class="page-quick-sidebar-toggler">
    <i class="icon-login"></i>
</a>
<!--<div data-ng-include="'tpl/quick-sidebar.html'" data-ng-controller="QuickSidebarController" class="page-quick-sidebar-wrapper"></div>-->
<!-- END QUICK SIDEBAR -->
</div>
<!-- END CONTAINER -->
</div>
</div>
<div class="page-wrapper-row">
<div class="page-wrapper-bottom">
<!-- BEGIN FOOTER -->
<div data-ng-include="'views/layouts/tpl/footer.html'"> </div>
<!-- END FOOTER -->
</div>
</div>
</div>
<script>
    (function () {
        $('#insuranceForm').validate({
            errorElement: 'span', //default input error message container
            errorClass: 'help-block help-block-error', // default input error message class
            focusInvalid: false, // do not focus the last invalid input
            ignore: "", // validate all fields including form hidden input
            rules: {



                date: {
                    required: true,

                },
                tdate: {
                    required: true,

                }

            },
            messages: {
                service: "Please select the service.",
                city: "Please select the city.",
                date: "date is required",
                tdate: "date is required",


                prospect: "Please select the speciality"


            },
            highlight: function (element) { // hightlight error inputs
                $(element)
                    .closest('.form-group').addClass(
                        'has-error'); // set error class to the control group
            },
            unhighlight: function (element) { // revert the change done by hightlight
                $(element)
                    .closest('.form-group').removeClass(
                        'has-error'); // set error class to the control group
            },
            success: function (label) {
                label
                    .closest('.form-group').removeClass(
                        'has-error'); // set success class to the control group
            },

        });





        setTimeout(function () {

            $('#date,#tdate,#reminderDate2').datepicker({
                format: "yyyy-mm-dd",
                autoclose: true,

            });

            $('#date').on("changeDate", function () {
                $('#tdate').val($(this).val());
                var selected = $(this).val();

                var dt2 = $('#tdate');


                $('#tdate').datepicker('setStartDate', selected);


            });


        }, 100);




    })();
</script>